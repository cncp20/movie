<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <link href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.js"></script>
    <link href="https://cdn.bootcss.com/dplayer/1.22.2/DPlayer.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/dplayer/1.22.2/DPlayer.min.js"></script>
    <title>Document</title>
</head>

<body>
    <header class="navbar navbar-expand flex-column  flex-md-row ">
        <a href="/" class="navbar-brand mr-0 mr-md-2">豆瓣预告片</a>
        <div class="navbar-nav-scroll">
            <ul class="navbar-nav bd-navbar-nav flex-row">
                <li class="nav-item">
                    <a href="/link1" class="nav-link">快捷链接1</a>
                </li>
                <li class="nav-item">
                    <a href="/link2" class="nav-link">快捷链接2</a>
                </li>
            </ul>
        </div>
    </header>
    <div class="row">
        <div class="col-md-3">
            <ul>
                <li>Link1</li>
                <li>Link2</li>
                <li>Link3</li>
            </ul>
        </div>
        <div class="col-md-9">
            <div class="row" id="result">
            </div>
        </div>
        <div id="modal" style="display: none"> 

        </div>
    </div>

    <script>
    // $(function() {
    //     let player = null;
    //     $("modal").on("hidden.bs.modal", function(e) {
    //         if (player && player.pause) {
    //             player.pause();
                
    //         }
    //     })
    //     $(".card-img-top").on("click", function(e) {
    //         let video = $(this).data("video");
    //         let image = $(this).attr("src");
    //         $("#modal").modal("show");
    //         if (!player) {
    //             player = new DPlayer({
    //                 container: document.getElementById("modal"),
    //                 screenshot: true,
    //                 video: {
    //                     url: video,
    //                     pic: image,
    //                     thumbnails: image
    //                 }
    //             });
    //         } else {
    //             player.switchVideo({
    //                 url: video,
    //                 pic: image,
    //                 type: "auto"
    //             });
    //         }
    //     })
    // })

    $(function() {
        fetch("/movies").then(res => {
            return res.json();
        }).then(data => {
            let dom = '';
            data.movies.forEach(item => {
                dom += `
                <div class="col-md-6">
                    <div class="card">
                        <img src="${item.poster}" alt="" class="card-img-top" 
                        <div class="card-body">
                            <h4 class="card-title">${item.name}</h4>
                            <p class="card-desc">${item.rate}</p>
                        </div>
                        <div class="card-footer">
                            <small class="text-muted">1天前更新</small>
                        </div>
                    </div>
                </div>
                `
            });

            $("#result").append(dom);
        })
    })
    </script>
</body>

</html>